import weakref
class A(object):pass
def callback(x):del lst[0]
keepali0e=[]
lst=[str()]
a=A()
a.c=a
del a
while lst[0]:a=A();a.c=a;keepalive.append(a);del a
lst=[str()]
a=A();a.c=a
w1=weakref.ref(a,callback)
del a
lst=[str()]
a=A();a.c=a
w2=weakref.ref(a,callback)
del a
callback_func=callback
del callback
b=A()
lst=[str()]
a=A()
c=A()
c.c=c
a.c=c
callback_func(w1)
