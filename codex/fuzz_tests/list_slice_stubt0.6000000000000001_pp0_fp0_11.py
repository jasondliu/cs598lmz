import weakref
class A(object):pass
def callback(x):del lst[0]
keepali0e=[]
lst=[str()]
a=A()
a.c=a
keepalive.append(a)
lst.append(weakref.ref(a,callback))
if len(lst)==2:
    print 'ok'
else:
    print 'not ok'

lst[0]=1
lst[0]=2
lst[0]=3
lst[0]=4
lst[0]=5
lst[0]=6
lst[0]=7
lst[0]=8
lst[0]=9
lst[0]=10
lst[0]=11
lst[0]=12
lst[0]=13
lst[0]=14
lst[0]=15
lst[0]=16
lst[0]=17
lst[0]=18
lst[0]=19
lst[0]=20
lst[0]=21
lst[0]=22
lst[0]=23
lst[0]=24
lst[0]=25
lst[0]=26
lst[0]=27
lst[0]=28
lst[0]=29

