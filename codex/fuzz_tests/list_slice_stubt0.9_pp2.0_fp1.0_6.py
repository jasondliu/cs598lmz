import weakref
class A(object):pass
def callback(x):del lst[0]
keepali0e=[]
lst=[str()]
a=A()
a.c=a
keepaluV=[a]
a.b=[a,a]
a.a=a
p=weakref.WeakValueDictionary()
p[1]=lst[0]
del lst
keepaluV.append(p)
r=weakref.ref(lst[0],callback)
del keepaluV[0].c
del keepaluV[:]
