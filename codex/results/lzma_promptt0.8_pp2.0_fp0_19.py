import lzma
# Test LZMADecompressor class

# We create a custom file-like class that simply keeps
# a sequence of bytes written to it in order to be able to
# test the LZMA decompressor.

class FakeFile:
    """Fake file-like class."""

    def __init__(self, *, debug=False):
        self._raw = b""
        self._debug = debug

    def write(self, data):
        if self._debug:
            print(f"writing {len(data)} bytes to fake file")
        self._raw += data

    def getvalue(self):
        return self._raw


# The contents of the file are not important here, any random bytes
# will do. This file was generated by compressing the first 512 bytes
# of the file 'lzma.py'; it's small enough for us to easily check its
# contents in this test.

orig = FakeFile()
orig.write(b'\xfd7zXZ\x00\x00!\x00\x06\xc0\x00\x00\x04n\xe5\x02\x
