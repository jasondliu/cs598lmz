import weakref
class A(object):pass
def callback(x):del lst[0]
keepali0e=[]
lst=[str()]
a=A()
a.c=a
keepalive.append(a)
callback(a)
del a
print(lst)

#删除列表中的元素时，列表的长度会发生变化，因此不能像之前那样每次都删除列表的第一个元素，而是需要每次都删除指定的元素
import weakref
class A(object):pass
def callback(x):lst.remove(x)
keepalive=[]
lst=[str()]
a=A()
a.c=a
keepalive.append(a)
callback(a)
del a
print(lst)

#使用weakref.WeakValueDictionary()
import weakref
class A(object):pass
keepalive=weakref.
